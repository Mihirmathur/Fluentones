<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Fluentones</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<!-- Bootstrap: Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

	

	<!-- Bootstrap: Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<div class="container">

		<section class="main">
			<center>
				<div class="input-group">
					<div id="container">
					<center>
						<div id="input"></div>
						<center>
						<input id="hiddenInput" type="text" class="form-control" placeholder="Enter Text" aria-describedby="basic-addon1">
						</center>
					</center>
					</div>
					<br><br><button type="button" id = "generate" class="btn btn-primary">Generate Coded Tones</button>
				</div>
			</center>
		</section>
		<center>
			<section class="output">	
			</section>
			<div class="color"></div>
		</center>
	</div>

</body>
<script type="text/javascript">
	$(document).ready(function(){
		$('#generate').click(function(){
			$('.colbox').remove();
			var value = $( "#hiddenInput" ).val();
			//value=value.toUpperCase();
			var hexstr='';
			var hexcode;
			for (var i = 0; i <= value.length - 1; i++) {
				hexstr+= (value.charCodeAt(i)).toString(16);
			};
			$(".output").text(hexstr);
			var i;
			while(hexstr.length >=6){
				console.log(hexstr.length);
				hexcode = hexstr.substring(0,6);

				if (hexcode.length==6) {
					console.log(hexcode);
					$('.color').append("<div class = 'colbox' style= 'background-color:#" + hexcode + ";'></div>");
					hexcode = '' ;
				};
				hexstr = hexstr.substring(6);
			};
		//}).keyup();	
	});
/*
Fancy Input Field
A PEN BY bartekd 
http://codepen.io/bartekd/pen/LtaBl 
*/
var input;
var cursor;
var hiddenInput;
var content = [];
var lastContent = "", targetContent = "";
var inputLock = false;
var autoWriteTimer;

var isMobile, isIE;

window.onload = function() {

	isMobile = navigator && navigator.platform && navigator.platform.match(/^(iPad|iPod|iPhone)$/);

	isIE = (navigator.appName == 'Microsoft Internet Explorer');

	input = document.getElementById('input');

	hiddenInput = document.getElementById('hiddenInput');
	hiddenInput.focus();

	cursor = document.createElement('cursor');
	cursor.setAttribute('class', 'blink');
	cursor.innerHTML = "|";

	if (!isMobile && !isIE) input.appendChild(cursor);

	function refresh() {
		inputLock = true;
		if (targetContent.length - lastContent.length == 0) return;
		var v = targetContent.substring(0, lastContent.length + 1);
		content = [];
		var blinkPadding = false;
		for (var i = 0; i < v.length; i++) {
			var l = v.charAt(i);
			var d = document.createElement('div');
			d.setAttribute('class', 'letterContainer');
			var d2 = document.createElement('div');
			var animClass = (i % 2 == 0) ? 'letterAnimTop' : 'letterAnimBottom';
			var letterClass = (lastContent.charAt(i) == l) ? 'letterStatic' : animClass;
			if (letterClass != 'letterStatic') blinkPadding = true;
			d2.setAttribute('class', letterClass);
			d.appendChild(d2);
			d2.innerHTML = l;
			content.push(d);
		}

		input.innerHTML = '';
		for (var i = 0; i < content.length; i++) {
			input.appendChild(content[i]);
		}

		cursor.style.paddingLeft = (blinkPadding) ? '22px' : '0';

		if (!isMobile && !isIE) input.appendChild(cursor);

		if (targetContent.length - lastContent.length > 1) setTimeout(refresh, 150);
		else inputLock = false;

		lastContent = v;
	}

	if (document.addEventListener) {

		document.addEventListener('touchstart', function(e) {
			clearInterval(autoWriteTimer);
			targetContent = lastContent;
		}, false);

		document.addEventListener('click', function(e) {
			clearInterval(autoWriteTimer);
			targetContent = lastContent;
			hiddenInput.focus();
		}, false);

		if (!isIE) {
            // Input event is buggy on IE, so don't bother
            // (http://msdn.microsoft.com/en-us/library/gg592978(v=vs.85).aspx#feedback)
            // We will use a timer instead (below)
            hiddenInput.addEventListener('input', function(e) {
            	e.preventDefault();
            	targetContent = hiddenInput.value;
            	if (!inputLock) refresh();

            }, false);
        } else {
        	setInterval(function() {
        		targetContent = hiddenInput.value;

        		if (targetContent != lastContent && !inputLock) refresh();
        	}, 100);
        }

    }
    hiddenInput.value = "";
    autoWriteTimer = setTimeout(function() {
    	if (lastContent != "") return;
    	targetContent = "Type message...";
    	refresh();
    }, 2000);
}
});
</script>
</html>